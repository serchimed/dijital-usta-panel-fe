<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data İşlemleri | Dijital Usta</title>
  <link rel="stylesheet" href="./s/site.css" />
  <link rel="icon" type="image/x-icon" href="./s/favicon.ico" />
</head>

<body>
  <header>
    <a href="./"><img src="./s/logo.png" alt="Dijital Usta" /></a>
    <button aria-label="Menü"><i></i><i></i><i></i></button>
  </header>
  <nav>
    <ul></ul>
  </nav>
  <main>
    <h2>Data İşlemleri</h2>

    <details>
      <summary>Wordpress İşlemleri</summary>
      <div>
        <input type="text" class="tblfilter" placeholder="filtrele" />
        <table>
          <thead>
            <tr>
              <th>Dosya Adı</th>
              <th>Boyut (KB)</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="wpResultsTable">
            <tr>
              <td colspan="3" class="graytr">Yükleniyor...</td>
            </tr>
          </tbody>
        </table>

        <button id="btnWP">Wordpress Son Verilerinin CSV'sini İndirmeyi Başlat</button>
        <p></p>
        <button id="btnSync" title="yeni kullanıcıları ekler ve anket bilgilerini kaydeder">Wordpress Verilerini Eşle</button>
        <p></p>
      </div>
    </details>

    <details>
      <summary>Sistem Yedekleri</summary>
      <div>
        <p class="description">Sistemin otomatik olarak aldığı yedekleri buradan indirebilirsiniz.</p>
        <input type="text" class="tblfilter" placeholder="filtrele" />
        <table>
          <thead>
            <tr>
              <th>Dosya Adı</th>
              <th>Boyut (KB)</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="backupsTable">
            <tr>
              <td colspan="3" class="graytr">Yükleniyor...</td>
            </tr>
          </tbody>
        </table>

        <button id="btnTriggerBackup" class="btn-act">Bu Anın Yeni Backup'ını Al</button>
        <p></p>
      </div>
    </details>

    <details>
      <summary>Yedek Geri Yükleme</summary>
      <div>
        <p class="description">Bir yedek dosyasından sistemi geri yükleyebilirsiniz.</p>

        <h4>Adım 1: Yedek Dosyası Seçin</h4>
        <input type="file" id="backupFile" accept=".zip" autocomplete="off" />

        <h4>Adım 2: Yedeği Analiz Edin</h4>
        <p>Yedek dosyasını yüklemeden önce ne gibi değişiklikler yapacağını görmek için analiz edin.</p>
        <button id="btnBackupCheck" class="btn-act" title="Dry Run">Önce Yedeği Analiz Et</button>
        <p></p>

        <div id="backupAnalysisResults" class="none mt30">
          <h3>Yedek Analiz Sonuçları</h3>

          <details open>
            <summary>Genel Özet</summary>
            <div>
              <table>
                <thead>
                  <tr>
                    <th>Yedekteki Toplam</th>
                    <th>Sistemdeki Toplam</th>
                    <th>Yeni</th>
                    <th>Güncellenen</th>
                    <th>Silinen</th>
                    <th>Değişmeyen</th>
                  </tr>
                </thead>
                <tbody id="summaryTable"></tbody>
              </table>
            </div>
          </details>

          <details open>
            <summary>Tip Bazında Kayıt İstatistikleri</summary>
            <div>
              <table>
                <thead>
                  <tr>
                    <th>Veri Tipi</th>
                    <th>Yedekte</th>
                    <th>Sistemde</th>
                    <th>Yeni</th>
                    <th>Güncellenen</th>
                    <th>Silinen</th>
                    <th>Değişmeyen</th>
                  </tr>
                </thead>
                <tbody id="recordsByTypeTable"></tbody>
              </table>
            </div>
          </details>

          <details>
            <summary>Yeni Kayıtlar</summary>
            <div id="newRecordsSection"></div>
          </details>

          <details>
            <summary>Güncellenmiş Kayıtlar</summary>
            <div id="updatedRecordsSection"></div>
          </details>

          <details>
            <summary>Silinmiş Kayıtlar</summary>
            <div id="deletedRecordsSection"></div>
          </details>
        </div>

        <h4 class="mt30">Adım 3: Geri Yüklemeyi Onaylayın</h4>
        <p class="lbl-warn">⚠️ DİKKAT: Bu işlem kolayca geri alınamaz ve sistemi şuan kullanan herkesi etkiler! Mevcut veriler yedeklenip, sistem tamamen seçili yedek dosyasına geri yüklenecektir.</p>
        <button id="btnBackupApprove" class="btn-gray" disabled title="Analiz sonuçlarını onayladıktan sonra geri yükleme işlemini başlatır">Geri Yüklemeyi Onayla ve Başlat</button>
        <p></p>
      </div>
    </details>
  </main>
  <footer>
    <div>
      <span>
        <h1>Dijital Usta</h1>
        <p>Gençleri e-ticaretle buluşturup<br />KOBİ'lere yetkin iş gücü kazandırmayı amaçlar.</p>
      </span>
      <img src="./s/logo-3.png" alt="Dijital Usta'nın Destekçileri" />
    </div>
    <div>
      © 2025 Dijital Usta | Tüm Haklar Saklıdır.
      <a href="concent.html">KVKK Aydınlatma Metni ve Açık Rıza Formu</a>
    </div>
  </footer>

  <script src="./s/site.js"></script>
  <script src="./s/code/pages/admin-data.js"></script>
</body>

</html>
